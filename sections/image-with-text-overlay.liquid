<style>
  #section-{{ section.id }} {
    color: {{ section.settings.text_color }};
    padding-top: 40px;
  }

  .ImageHero__Wrapper {
    position: relative;
    width: 100%;
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    overflow: hidden;
  }

  .ImageHero__ImageWrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .ImageHero__ImageWrapper--hasOverlay::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba({{ section.settings.overlay_color | color_to_rgb | remove: 'rgb(' | remove: ')' }}, {{ section.settings.overlay_opacity | divided_by: 100.0 }});
    z-index: 2;
  }

  .ImageHero__ImageWrapper img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }

  .ImageHero__ContentOverlay {
    position: relative;
    z-index: 10;
    padding: 2rem;
    max-width: 900px;
    margin: 0 auto;
  }

  .PlaceholderBackground {
    background-color: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .PlaceholderBackground .placeholder-svg {
    width: 150px;
    height: 150px;
    opacity: 0.2;
  }
</style>

<section class="ImageHero-{{ section.id }}" id="section-{{ section.id }}">
  <div class="ImageHero__Wrapper">
    {% if section.settings.image != blank %}
      <div class="ImageHero__ImageWrapper {% if section.settings.overlay_opacity > 0 %}ImageHero__ImageWrapper--hasOverlay{% endif %}">
        <img
          src="{{ section.settings.image | img_url: '1200x' }}"
          alt="{{ section.settings.image.alt | escape }}"
          style="width: 100%; height: 100%; object-fit: cover;"
        >
      </div>
    {% else %}
      <div class="ImageHero__ImageWrapper PlaceholderBackground">
        {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
      </div>
    {% endif %}

    <div class="ImageHero__ContentOverlay">
      <header class="SectionHeader">
        {% if section.settings.subheading != blank %}
          <h3 style="color: #fff;" class="subtitleLightHigh">{{ section.settings.subheading | escape }}</h3>
        {% endif %}

        {% if section.settings.title != blank %}
          <h2 class="title" style="color: #fff">{{ section.settings.title | escape }}</h2>
        {% endif %}

        {% if section.settings.content != blank %}
          <div class="subtitleLight">
            {{ section.settings.content }}
          </div>
        {% endif %}
      </header>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Image with text overlay",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "info": "1500 x 800px jpg recommended"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 30
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Sub-heading"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Tell your story"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Text",
      "default": "<p>Add your own custom content to give more information about your store, availability details...</p>"
    }
  ],
  "presets": [
    {
      "category": "Image",
      "name": "Image with text (overlay)",
      "settings": {}
    }
  ]
}
{% endschema %}
